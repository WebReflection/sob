/*! (C) WebReflection Mit Style License */
define(function(){var e=window,t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(e){setTimeout(e,16)},n=e.requestIdleCallback,r=!n,i=e.performance||{now:Date.now},s=i.now||i.webkitNow||function(){return(new Date).getTime()},o=function(t){for(var n=this,r=[],i={id:{},fn:t,ar:r},s=1;s<arguments.length;s++)r[s-1]=arguments[s];return l(n,i)||(n.push(i),i.id)},u=function(t,n){return t===this[n]},a=function(t){t.fn.apply(null,t.ar)},f=function(t,n){var r=t.length;while(r--&&t[r].id!==n);return r},l=function(t,n){for(var r=0,i;r<t.length;r++){i=t[r];if(i.fn===n.fn&&i.ar.length===n.ar.length&&i.ar.every(u,n.ar))return i.id}return null},c=function(t,n){var r=f(t,n),i=-1<r;return i&&t.splice(r,1),i},h=0,p=[],d=[],v={debug:!1,isOverloaded:!1,minFPS:60,clear:function(t){c(p,t)||c(d,t)},frame:function(){return o.apply(p,arguments)},idle:function(){return o.apply(d,arguments)}};(function m(){var e=s.call(i),n=1e3/v.minFPS,o=!1,u;while(p.length){a(p.shift()),o=s.call(i)-e>=n;if(o)break}r&&!o&&d.length&&a(d.shift()),v.isOverloaded=p.length>h,h=p.length,v.debug&&v.isOverloaded&&console.warn("overloaded frame"),t(m)})(),r||function g(){var e=s.call(i),t=1e3/v.minFPS,r;while(d.length){a(d.shift());if(s.call(i)-e>=t)break}n(g)}()});